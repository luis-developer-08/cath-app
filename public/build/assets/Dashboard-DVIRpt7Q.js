var Le=s=>{throw TypeError(s)};var ue=(s,t,a)=>t.has(s)||Le("Cannot "+a);var n=(s,t,a)=>(ue(s,t,"read from private field"),a?a.call(s):t.get(s)),C=(s,t,a)=>t.has(s)?Le("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,a),p=(s,t,a,r)=>(ue(s,t,"write to private field"),r?r.call(s,a):t.set(s,a),a),j=(s,t,a)=>(ue(s,t,"access private method"),a);import{S as st,p as Ie,r as T,s as he,a as le,n as at,i as me,b as Fe,t as rt,f as nt,c as lt,d as Te,e as Ye,g as b,u as oe,j as e,k,U as Q,h as ne,L as it}from"./app-BrCZesEf.js";import{A as ct}from"./AuthenticatedLayout-E1OvGcmV.js";var O,h,ae,_,$,X,B,F,re,W,G,z,H,Y,Z,f,se,fe,xe,pe,be,ge,ve,je,Ue,Be,ot=(Be=class extends st{constructor(t,a){super();C(this,f);C(this,O);C(this,h);C(this,ae);C(this,_);C(this,$);C(this,X);C(this,B);C(this,F);C(this,re);C(this,W);C(this,G);C(this,z);C(this,H);C(this,Y);C(this,Z,new Set);this.options=a,p(this,O,t),p(this,F,null),p(this,B,Ie()),this.options.experimental_prefetchInRender||n(this,B).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(a)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(n(this,h).addObserver(this),De(n(this,h),this.options)?j(this,f,se).call(this):this.updateResult(),j(this,f,be).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ye(n(this,h),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ye(n(this,h),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,j(this,f,ge).call(this),j(this,f,ve).call(this),n(this,h).removeObserver(this)}setOptions(t,a){const r=this.options,o=n(this,h);if(this.options=n(this,O).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof T(this.options.enabled,n(this,h))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");j(this,f,je).call(this),n(this,h).setOptions(this.options),r._defaulted&&!he(this.options,r)&&n(this,O).getQueryCache().notify({type:"observerOptionsUpdated",query:n(this,h),observer:this});const d=this.hasListeners();d&&Ae(n(this,h),o,this.options,r)&&j(this,f,se).call(this),this.updateResult(a),d&&(n(this,h)!==o||T(this.options.enabled,n(this,h))!==T(r.enabled,n(this,h))||le(this.options.staleTime,n(this,h))!==le(r.staleTime,n(this,h)))&&j(this,f,fe).call(this);const i=j(this,f,xe).call(this);d&&(n(this,h)!==o||T(this.options.enabled,n(this,h))!==T(r.enabled,n(this,h))||i!==n(this,Y))&&j(this,f,pe).call(this,i)}getOptimisticResult(t){const a=n(this,O).getQueryCache().build(n(this,O),t),r=this.createResult(a,t);return ut(this,r)&&(p(this,_,r),p(this,X,this.options),p(this,$,n(this,h).state)),r}getCurrentResult(){return n(this,_)}trackResult(t,a){const r={};return Object.keys(t).forEach(o=>{Object.defineProperty(r,o,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(o),a==null||a(o),t[o])})}),r}trackProp(t){n(this,Z).add(t)}getCurrentQuery(){return n(this,h)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const a=n(this,O).defaultQueryOptions(t),r=n(this,O).getQueryCache().build(n(this,O),a);return r.fetch().then(()=>this.createResult(r,a))}fetch(t){return j(this,f,se).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),n(this,_)))}createResult(t,a){var te;const r=n(this,h),o=this.options,d=n(this,_),i=n(this,$),g=n(this,X),v=t!==r?t.state:n(this,ae),{state:S}=t;let u={...S},R=!1,c;if(a._optimisticResults){const w=this.hasListeners(),D=!w&&De(t,a),A=w&&Ae(t,r,a,o);(D||A)&&(u={...u,...lt(S.data,t.options)}),a._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:N,errorUpdatedAt:E,status:x}=u;if(a.select&&u.data!==void 0)if(d&&u.data===(i==null?void 0:i.data)&&a.select===n(this,re))c=n(this,W);else try{p(this,re,a.select),c=a.select(u.data),c=Te(d==null?void 0:d.data,c,a),p(this,W,c),p(this,F,null)}catch(w){p(this,F,w)}else c=u.data;if(a.placeholderData!==void 0&&c===void 0&&x==="pending"){let w;if(d!=null&&d.isPlaceholderData&&a.placeholderData===(g==null?void 0:g.placeholderData))w=d.data;else if(w=typeof a.placeholderData=="function"?a.placeholderData((te=n(this,G))==null?void 0:te.state.data,n(this,G)):a.placeholderData,a.select&&w!==void 0)try{w=a.select(w),p(this,F,null)}catch(D){p(this,F,D)}w!==void 0&&(x="success",c=Te(d==null?void 0:d.data,w,a),R=!0)}n(this,F)&&(N=n(this,F),c=n(this,W),E=Date.now(),x="error");const L=u.fetchStatus==="fetching",q=x==="pending",V=x==="error",J=q&&L,ee=c!==void 0,I={status:x,fetchStatus:u.fetchStatus,isPending:q,isSuccess:x==="success",isError:V,isInitialLoading:J,isLoading:J,data:c,dataUpdatedAt:u.dataUpdatedAt,error:N,errorUpdatedAt:E,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>v.dataUpdateCount||u.errorUpdateCount>v.errorUpdateCount,isFetching:L,isRefetching:L&&!q,isLoadingError:V&&!ee,isPaused:u.fetchStatus==="paused",isPlaceholderData:R,isRefetchError:V&&ee,isStale:Ne(t,a),refetch:this.refetch,promise:n(this,B)};if(this.options.experimental_prefetchInRender){const w=U=>{I.status==="error"?U.reject(I.error):I.data!==void 0&&U.resolve(I.data)},D=()=>{const U=p(this,B,I.promise=Ie());w(U)},A=n(this,B);switch(A.status){case"pending":t.queryHash===r.queryHash&&w(A);break;case"fulfilled":(I.status==="error"||I.data!==A.value)&&D();break;case"rejected":(I.status!=="error"||I.error!==A.reason)&&D();break}}return I}updateResult(t){const a=n(this,_),r=this.createResult(n(this,h),this.options);if(p(this,$,n(this,h).state),p(this,X,this.options),n(this,$).data!==void 0&&p(this,G,n(this,h)),he(r,a))return;p(this,_,r);const o={},d=()=>{if(!a)return!0;const{notifyOnChangeProps:i}=this.options,g=typeof i=="function"?i():i;if(g==="all"||!g&&!n(this,Z).size)return!0;const m=new Set(g??n(this,Z));return this.options.throwOnError&&m.add("error"),Object.keys(n(this,_)).some(v=>{const S=v;return n(this,_)[S]!==a[S]&&m.has(S)})};(t==null?void 0:t.listeners)!==!1&&d()&&(o.listeners=!0),j(this,f,Ue).call(this,{...o,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&j(this,f,be).call(this)}},O=new WeakMap,h=new WeakMap,ae=new WeakMap,_=new WeakMap,$=new WeakMap,X=new WeakMap,B=new WeakMap,F=new WeakMap,re=new WeakMap,W=new WeakMap,G=new WeakMap,z=new WeakMap,H=new WeakMap,Y=new WeakMap,Z=new WeakMap,f=new WeakSet,se=function(t){j(this,f,je).call(this);let a=n(this,h).fetch(this.options,t);return t!=null&&t.throwOnError||(a=a.catch(at)),a},fe=function(){j(this,f,ge).call(this);const t=le(this.options.staleTime,n(this,h));if(me||n(this,_).isStale||!Fe(t))return;const r=rt(n(this,_).dataUpdatedAt,t)+1;p(this,z,setTimeout(()=>{n(this,_).isStale||this.updateResult()},r))},xe=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(n(this,h)):this.options.refetchInterval)??!1},pe=function(t){j(this,f,ve).call(this),p(this,Y,t),!(me||T(this.options.enabled,n(this,h))===!1||!Fe(n(this,Y))||n(this,Y)===0)&&p(this,H,setInterval(()=>{(this.options.refetchIntervalInBackground||nt.isFocused())&&j(this,f,se).call(this)},n(this,Y)))},be=function(){j(this,f,fe).call(this),j(this,f,pe).call(this,j(this,f,xe).call(this))},ge=function(){n(this,z)&&(clearTimeout(n(this,z)),p(this,z,void 0))},ve=function(){n(this,H)&&(clearInterval(n(this,H)),p(this,H,void 0))},je=function(){const t=n(this,O).getQueryCache().build(n(this,O),this.options);if(t===n(this,h))return;const a=n(this,h);p(this,h,t),p(this,ae,t.state),this.hasListeners()&&(a==null||a.removeObserver(this),t.addObserver(this))},Ue=function(t){Ye.batch(()=>{t.listeners&&this.listeners.forEach(a=>{a(n(this,_))}),n(this,O).getQueryCache().notify({query:n(this,h),type:"observerResultsUpdated"})})},Be);function dt(s,t){return T(t.enabled,s)!==!1&&s.state.data===void 0&&!(s.state.status==="error"&&t.retryOnMount===!1)}function De(s,t){return dt(s,t)||s.state.data!==void 0&&ye(s,t,t.refetchOnMount)}function ye(s,t,a){if(T(t.enabled,s)!==!1){const r=typeof a=="function"?a(s):a;return r==="always"||r!==!1&&Ne(s,t)}return!1}function Ae(s,t,a,r){return(s!==t||T(r.enabled,s)===!1)&&(!a.suspense||s.state.status!=="error")&&Ne(s,a)}function Ne(s,t){return T(t.enabled,s)!==!1&&s.isStaleByTime(le(t.staleTime,s))}function ut(s,t){return!he(s.getCurrentResult(),t)}var $e=b.createContext(!1),ht=()=>b.useContext($e);$e.Provider;function mt(){let s=!1;return{clearReset:()=>{s=!1},reset:()=>{s=!0},isReset:()=>s}}var ft=b.createContext(mt()),xt=()=>b.useContext(ft);function pt(s,t){return typeof s=="function"?s(...t):!!s}function Me(){}var bt=(s,t)=>{(s.suspense||s.throwOnError||s.experimental_prefetchInRender)&&(t.isReset()||(s.retryOnMount=!1))},gt=s=>{b.useEffect(()=>{s.clearReset()},[s])},vt=({result:s,errorResetBoundary:t,throwOnError:a,query:r,suspense:o})=>s.isError&&!t.isReset()&&!s.isFetching&&r&&(o&&s.data===void 0||pt(a,[s.error,r])),jt=s=>{const t=s.staleTime;s.suspense&&(s.staleTime=typeof t=="function"?(...a)=>Math.max(t(...a),1e3):Math.max(t??1e3,1e3),typeof s.gcTime=="number"&&(s.gcTime=Math.max(s.gcTime,1e3)))},yt=(s,t)=>s.isLoading&&s.isFetching&&!t,Nt=(s,t)=>(s==null?void 0:s.suspense)&&t.isPending,Pe=(s,t,a)=>t.fetchOptimistic(s).catch(()=>{a.clearReset()});function wt(s,t,a){var u,R,c,N,E;const r=oe(),o=ht(),d=xt(),i=r.defaultQueryOptions(s);(R=(u=r.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||R.call(u,i),i._optimisticResults=o?"isRestoring":"optimistic",jt(i),bt(i,d),gt(d);const g=!r.getQueryCache().get(i.queryHash),[m]=b.useState(()=>new t(r,i)),v=m.getOptimisticResult(i),S=!o&&s.subscribed!==!1;if(b.useSyncExternalStore(b.useCallback(x=>{const L=S?m.subscribe(Ye.batchCalls(x)):Me;return m.updateResult(),L},[m,S]),()=>m.getCurrentResult(),()=>m.getCurrentResult()),b.useEffect(()=>{m.setOptions(i,{listeners:!1})},[i,m]),Nt(i,v))throw Pe(i,m,d);if(vt({result:v,errorResetBoundary:d,throwOnError:i.throwOnError,query:r.getQueryCache().get(i.queryHash),suspense:i.suspense}))throw v.error;if((N=(c=r.getDefaultOptions().queries)==null?void 0:c._experimental_afterQuery)==null||N.call(c,i,v),i.experimental_prefetchInRender&&!me&&yt(v,o)){const x=g?Pe(i,m,d):(E=r.getQueryCache().get(i.queryHash))==null?void 0:E.promise;x==null||x.catch(Me).finally(()=>{m.updateResult()})}return i.notifyOnChangeProps?v:m.trackResult(v)}function K(s,t){return wt(s,ot)}const St=()=>{const s=oe(),[t,a]=b.useState({studentNumber:"",fname:"",mname:"",lname:"",year:"",bachelor:"",contact_number:"",email:"",sem_eff_loa:"",year_eff_loa:"",sem_re:"",year_re:"",reason:""}),r=c=>{const{id:N,value:E}=c.target;if(N==="studentNumber"){const x=E.replace(/\D/g,"");let L=x;x.length>2&&(L=`${x.slice(0,2)}-${x.slice(2,7)}`),x.length<=7&&a(q=>({...q,[N]:L}))}else a(x=>({...x,[N]:E}))},o=["1st","2nd"],d=["2010-2011","2011-2012","2012-2013","2013-2014","2014-2015","2015-2016","2017-2018","2018-2019","2019-2020","2020-2021","2021-2022","2022-2023","2023-2024","2024-2025","2025-2026","2026-2027"],i=async()=>{const{data:c}=await axios.get("/api/years");return c},{data:g,isLoading:m}=K({queryFn:i,queryKey:["getAllYears"]}),v=async()=>{const{data:c}=await axios.get("/api/bachelors");return c},{data:S,isLoading:u}=K({queryFn:v,queryKey:["getAllBachelors"]}),R=async c=>{c.preventDefault();let N=[];if(t.studentNumber||N.push("Student Number is required."),t.fname||N.push("First Name is required."),t.lname||N.push("Last Name is required."),N.length>0){k.error(N.join(`
`));return}const E={...t,studentNumber:t.studentNumber.padEnd(8,"-").slice(0,8)};try{const{data:x}=await axios.post("/api/transactions",E);x&&(k.success(x.message),s.invalidateQueries({predicate:L=>["getAllTransactions"].includes(L.queryKey[0])}),a({studentNumber:"",fname:"",mname:"",lname:"",year:"",bachelor:"",contact_number:"",email:"",sem_eff_loa:"",year_eff_loa:"",sem_re:"",year_re:"",reason:""}))}catch(x){console.error("Submission error:",x),k.error("Failed to submit form")}};return e.jsxs("form",{onSubmit:R,children:[e.jsxs("div",{className:"overflow-y-auto h-[60vh] px-2",children:[e.jsx("div",{className:"space-y-2 w-full mb-10",children:e.jsxs("div",{className:"flex gap-2 w-full items-center",children:[e.jsx("label",{htmlFor:"studentNumber",className:"label w-2/5 text-nowrap label-xs",children:"Student #:"}),e.jsx("div",{className:"w-3/5 flex justify-end",children:e.jsx("input",{id:"studentNumber",type:"text",className:"input input-bordered w-full input-sm",maxLength:"8",value:t.studentNumber,onChange:r})})]})}),e.jsxs("div",{className:"space-y-2 w-full mb-10",children:[e.jsxs("div",{className:"flex gap-2 w-full items-center",children:[e.jsx("label",{htmlFor:"fname",className:"label w-2/5 text-nowrap label-xs",children:"First Name:"}),e.jsx("div",{className:"w-3/5 flex justify-end",children:e.jsx("input",{id:"fname",type:"text",className:"input input-bordered w-full input-sm",value:t.fname,onChange:r})})]}),e.jsxs("div",{className:"flex gap-2 w-full items-center",children:[e.jsx("label",{htmlFor:"mname",className:"label w-2/5 text-nowrap",children:"Middle Initial:"}),e.jsx("div",{className:"w-3/5 flex justify-end",children:e.jsx("input",{id:"mname",type:"text",className:"input input-bordered w-full input-sm",value:t.mname,onChange:r})})]}),e.jsxs("div",{className:"flex gap-2 w-full items-center",children:[e.jsx("label",{htmlFor:"lname",className:"label w-2/5 text-nowrap",children:"Last Name:"}),e.jsx("div",{className:"w-3/5 flex justify-end",children:e.jsx("input",{id:"lname",type:"text",className:"input input-bordered w-full input-sm",value:t.lname,onChange:r})})]})]}),e.jsx("div",{className:"space-y-2 w-full mb-10",children:e.jsxs("div",{className:"flex gap-10",children:[e.jsxs("div",{className:"flex gap-2 w-1/5 items-center flex-1",children:[e.jsx("label",{htmlFor:"year",className:"label text-nowrap label-xs",children:"Year:"}),e.jsx("div",{className:"w-full justify-end",children:e.jsxs("select",{id:"year",className:"select select-bordered w-full select-sm text-xs",value:t.year,onChange:r,children:[e.jsx("option",{value:"",children:"--Year--"}),m?null:g.map(c=>e.jsx("option",{value:c.name,children:c.name}))]})})]}),e.jsxs("div",{className:"flex gap-3 w-3/5 items-center",children:[e.jsx("label",{htmlFor:"bachelor",className:"label w-1/5 text-nowrap label-xs",children:"Bachelor:"}),e.jsx("div",{className:"w-4/5 flex justify-end",children:e.jsxs("select",{name:"",id:"bachelor",className:"select select-bordered w-full select-sm text-xs",value:t.bachelor,onChange:r,children:[e.jsx("option",{value:"",children:"--Bachelor--"}),u?null:S.map(c=>e.jsx("option",{value:c.name,children:c.name}))]})})]})]})}),e.jsxs("div",{className:"space-y-2 w-full mb-10",children:[e.jsxs("div",{className:"flex gap-2 w-full items-center",children:[e.jsx("label",{htmlFor:"contact_number",className:"label w-2/5 text-nowrap label-xs",children:"Contact Number:"}),e.jsx("div",{className:"w-3/5 flex justify-end",children:e.jsx("input",{id:"contact_number",type:"text",className:"input input-bordered w-full input-sm",value:t.contact_number,onChange:r})})]}),e.jsxs("div",{className:"flex gap-2 w-full items-center",children:[e.jsx("label",{htmlFor:"email",className:"label w-2/5 text-nowrap",children:"Email:"}),e.jsx("div",{className:"w-3/5 flex justify-end",children:e.jsx("input",{id:"email",type:"text",className:"input input-bordered w-full input-sm",value:t.email,onChange:r})})]})]}),e.jsx("div",{className:"divider"}),e.jsxs("div",{className:"space-y-2 w-full mb-10",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{children:"Effectivity of LOA"}),e.jsxs("div",{className:"flex gap-10",children:[e.jsxs("div",{className:"flex gap-2 w-1/5 items-center flex-1",children:[e.jsx("label",{htmlFor:"sem_eff_loa",className:"label text-nowrap label-xs",children:"LOA Sem:"}),e.jsx("div",{className:"w-full justify-end",children:e.jsxs("select",{name:"",id:"sem_eff_loa",className:"select select-bordered w-full select-sm text-xs",value:t.sem_eff_loa,onChange:r,children:[e.jsx("option",{value:"",children:"--Sem--"}),o.map(c=>e.jsx("option",{value:c,children:c},`${c}-loa-sem`))]})})]}),e.jsxs("div",{className:"flex gap-3 w-3/5 items-center",children:[e.jsx("label",{htmlFor:"year_eff_loa",className:"label w-1/5 text-nowrap label-xs",children:"LOA Year:"}),e.jsx("div",{className:"w-4/5 flex justify-end",children:e.jsxs("select",{name:"",id:"year_eff_loa",className:"select select-bordered w-full select-sm text-xs",value:t.year_eff_loa,onChange:r,children:[e.jsx("option",{value:"",children:"--Select Bachelor--"}),d.map(c=>e.jsx("option",{value:c,children:c},`${c}-loa-year`))]})})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{children:"Returning Academic Year"}),e.jsxs("div",{className:"flex gap-10",children:[e.jsxs("div",{className:"flex gap-2 w-1/5 items-center flex-1",children:[e.jsx("label",{htmlFor:"sem_re",className:"label text-nowrap label-xs",children:"RE. Sem:"}),e.jsx("div",{className:"w-full justify-end",children:e.jsxs("select",{name:"",id:"sem_re",className:"select select-bordered w-full select-sm text-xs",value:t.sem_re,onChange:r,children:[e.jsx("option",{value:"",children:"--Sem--"}),o.map(c=>e.jsx("option",{value:c,children:c},`${c}-re-sem`))]})})]}),e.jsxs("div",{className:"flex gap-3 w-3/5 items-center",children:[e.jsx("label",{htmlFor:"year_re",className:"label w-1/5 text-nowrap label-xs",children:"RE. Year:"}),e.jsx("div",{className:"w-4/5 flex justify-end",children:e.jsxs("select",{name:"",id:"year_re",className:"select select-bordered w-full select-sm text-xs",value:t.year_re,onChange:r,children:[e.jsx("option",{value:"",children:"--Select Bachelor--"}),d.map(c=>e.jsx("option",{value:c,children:c},`${c}-re-year`))]})})]})]})]})]}),e.jsx("div",{className:"divider"}),e.jsx("div",{className:"space-y-2 w-full mb-10",children:e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{children:"Reason:"}),e.jsx("div",{className:"flex gap-10",children:e.jsx("textarea",{className:"textarea textarea-bordered w-full",id:"reason",value:t.reason,onChange:r})})]})})]}),e.jsx("div",{className:"px-2 py-5",children:e.jsx("button",{className:"btn bg-base-300 w-full",type:"submit",children:"Submit"})})]})};var ze={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Qe=Q.createContext&&Q.createContext(ze),Ct=["attr","size","title"];function _t(s,t){if(s==null)return{};var a=Ot(s,t),r,o;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);for(o=0;o<d.length;o++)r=d[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(s,r)&&(a[r]=s[r])}return a}function Ot(s,t){if(s==null)return{};var a={};for(var r in s)if(Object.prototype.hasOwnProperty.call(s,r)){if(t.indexOf(r)>=0)continue;a[r]=s[r]}return a}function ie(){return ie=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(s[r]=a[r])}return s},ie.apply(this,arguments)}function qe(s,t){var a=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(s,o).enumerable})),a.push.apply(a,r)}return a}function ce(s){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?qe(Object(a),!0).forEach(function(r){Rt(s,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(a)):qe(Object(a)).forEach(function(r){Object.defineProperty(s,r,Object.getOwnPropertyDescriptor(a,r))})}return s}function Rt(s,t,a){return t=Et(t),t in s?Object.defineProperty(s,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[t]=a,s}function Et(s){var t=Lt(s,"string");return typeof t=="symbol"?t:t+""}function Lt(s,t){if(typeof s!="object"||!s)return s;var a=s[Symbol.toPrimitive];if(a!==void 0){var r=a.call(s,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function He(s){return s&&s.map((t,a)=>Q.createElement(t.tag,ce({key:a},t.attr),He(t.child)))}function we(s){return t=>Q.createElement(It,ie({attr:ce({},s.attr)},t),He(s.child))}function It(s){var t=a=>{var{attr:r,size:o,title:d}=s,i=_t(s,Ct),g=o||a.size||"1em",m;return a.className&&(m=a.className),s.className&&(m=(m?m+" ":"")+s.className),Q.createElement("svg",ie({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,r,i,{className:m,style:ce(ce({color:s.color||a.color},a.style),s.style),height:g,width:g,xmlns:"http://www.w3.org/2000/svg"}),d&&Q.createElement("title",null,d),s.children)};return Qe!==void 0?Q.createElement(Qe.Consumer,null,a=>t(a)):t(ze)}function Ft(s){return we({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(s)}function Tt(s){return we({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m7 17.013 4.413-.015 9.632-9.54c.378-.378.586-.88.586-1.414s-.208-1.036-.586-1.414l-1.586-1.586c-.756-.756-2.075-.752-2.825-.003L7 12.583v4.43zM18.045 4.458l1.589 1.583-1.597 1.582-1.586-1.585 1.594-1.58zM9 13.417l6.03-5.973 1.586 1.586-6.029 5.971L9 15.006v-1.589z"},child:[]},{tag:"path",attr:{d:"M5 21h14c1.103 0 2-.897 2-2v-8.668l-2 2V19H8.158c-.026 0-.053.01-.079.01-.033 0-.066-.009-.1-.01H5V5h6.847l2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2z"},child:[]}]})(s)}const Dt=s=>{let t;const a=new Set,r=(v,S)=>{const u=typeof v=="function"?v(t):v;if(!Object.is(u,t)){const R=t;t=S??(typeof u!="object"||u===null)?u:Object.assign({},t,u),a.forEach(c=>c(t,R))}},o=()=>t,g={setState:r,getState:o,getInitialState:()=>m,subscribe:v=>(a.add(v),()=>a.delete(v))},m=t=s(r,o,g);return g},At=s=>Dt(s),Mt=s=>s;function Pt(s,t=Mt){const a=Q.useSyncExternalStore(s.subscribe,()=>t(s.getState()),()=>t(s.getInitialState()));return Q.useDebugValue(a),a}const Qt=s=>{const t=At(s),a=r=>Pt(t,r);return Object.assign(a,t),a},qt=s=>Qt(s),Ve=qt(s=>({editModalIsOpen:!1,transactionId:null,openEditModal:t=>s({editModalIsOpen:!0,transactionId:t}),closeEditModal:()=>s({editModalIsOpen:!1,transactionId:null}),toggleEditModal:()=>s(t=>({editModalIsOpen:!t.isOpen}))}));function Bt(s){return we({tag:"svg",attr:{viewBox:"0 0 1024 1024",fill:"currentColor",fillRule:"evenodd"},child:[{tag:"path",attr:{d:"M799.855 166.312c.023.007.043.018.084.059l57.69 57.69c.041.041.052.06.059.084a.118.118 0 0 1 0 .069c-.007.023-.018.042-.059.083L569.926 512l287.703 287.703c.041.04.052.06.059.083a.118.118 0 0 1 0 .07c-.007.022-.018.042-.059.083l-57.69 57.69c-.041.041-.06.052-.084.059a.118.118 0 0 1-.069 0c-.023-.007-.042-.018-.083-.059L512 569.926 224.297 857.629c-.04.041-.06.052-.083.059a.118.118 0 0 1-.07 0c-.022-.007-.042-.018-.083-.059l-57.69-57.69c-.041-.041-.052-.06-.059-.084a.118.118 0 0 1 0-.069c.007-.023.018-.042.059-.083L454.073 512 166.371 224.297c-.041-.04-.052-.06-.059-.083a.118.118 0 0 1 0-.07c.007-.022.018-.042.059-.083l57.69-57.69c.041-.041.06-.052.084-.059a.118.118 0 0 1 .069 0c.023.007.042.018.083.059L512 454.073l287.703-287.702c.04-.041.06-.052.083-.059a.118.118 0 0 1 .07 0Z"},child:[]}]})(s)}const Yt=()=>{const{transactionId:s,editModalIsOpen:t,closeEditModal:a}=Ve(),[r,o]=b.useState(!1),d=oe(),[i,g]=b.useState(""),[m,v]=b.useState(""),[S,u]=b.useState(""),[R,c]=b.useState(""),[N,E]=b.useState(""),[x,L]=b.useState(""),[q,V]=b.useState(""),[J,ee]=b.useState(""),[de,I]=b.useState(""),[te,w]=b.useState(""),[D,A]=b.useState(""),[U,Se]=b.useState(""),[Ce,_e]=b.useState(""),ke=async()=>{const{data:l}=await ne.get("/api/years");return l},{data:Ke,isLoading:Xe}=K({queryFn:ke,queryKey:["getAllYears"]}),We=async()=>{const{data:l}=await ne.get("/api/bachelors");return l},{data:Ge,isLoading:Ze}=K({queryFn:We,queryKey:["getAllBachelors"]}),Oe=["1st","2nd"],Re=["2010-2011","2011-2012","2012-2013","2013-2014","2014-2015","2015-2016","2017-2018","2018-2019","2019-2020","2020-2021","2021-2022","2022-2023","2023-2024","2024-2025","2025-2026","2026-2027"],Je=async()=>{if(!s)return null;try{const{data:l}=await ne.get(`/api/transactions/${s}`);return l}catch(l){console.error("Error fetching transaction:",l)}},{data:M,isLoading:$t,isSuccess:Ee}=K({queryKey:["getTransaction",s],queryFn:Je}),et=async l=>{o(!0);try{await ne.put(`/api/transactions/${s}`,l),d.invalidateQueries("getAllTransactions"),o(!1),k.success("Transaction updated successfully!"),a()}catch(y){console.error("Error updating transaction:",y),o(!1)}},tt=l=>{l.preventDefault();let y=[];if(i||y.push("Student Number is required."),m||y.push("First Name is required."),R||y.push("Last Name is required."),y.length>0){k.error(y.join(`
`));return}et({studentNumber:i,fname:m,mname:S,lname:R,year:N,bachelor:x,contact_number:q,email:J,sem_eff_loa:de,year_eff_loa:te,sem_re:D,year_re:U,reason:Ce})};return b.useEffect(()=>{var l,y;if(Ee&&M){const P=M.student||{};g(P.student_number||""),v(P.first_name||""),u(P.middle_name||""),c(P.last_name||""),E(((l=P.year)==null?void 0:l.name)||""),L(((y=P.bachelor)==null?void 0:y.name)||""),V(P.contact_number||""),ee(P.email||""),I(M.loa_semester||""),w(M.loa_year||""),A(M.re_semester||""),Se(M.re_year||""),_e(M.reason||"")}},[Ee,M]),e.jsx("dialog",{className:`modal ${t?"modal-open":""}`,children:e.jsxs("div",{className:"modal-box w-11/12 max-w-7xl h-[90vh]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Edit Transaction"}),e.jsx("button",{className:"btn bg-base-300",onClick:a,children:e.jsx(Bt,{})})]}),M&&e.jsxs("form",{onSubmit:tt,className:"mt-4 flex flex-col gap-4",children:[e.jsxs("div",{className:"overflow-y-auto h-[60vh] px-5",children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Student Number"}),e.jsx("input",{type:"text",value:i,onChange:l=>{let y=l.target.value.replace(/\D/g,"");y.length>6&&(y=y.slice(0,7)),y.length>2&&(y=y.slice(0,2)+"-"+y.slice(2)),g(y)},className:"input input-bordered w-full",placeholder:"XX-XXXX"})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"First Name"}),e.jsx("input",{type:"text",value:m,onChange:l=>v(l.target.value),className:"input input-bordered w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Middle Name"}),e.jsx("input",{type:"text",value:S,onChange:l=>u(l.target.value),className:"input input-bordered w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Last Name"}),e.jsx("input",{type:"text",value:R,onChange:l=>c(l.target.value),className:"input input-bordered w-full"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Year"}),e.jsxs("select",{id:"year",className:"select select-bordered w-full",value:N,onChange:l=>E(l.target.value),children:[e.jsx("option",{value:"",children:"--Year--"}),Xe?null:Ke.map(l=>e.jsx("option",{value:l.name,children:l.name}))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Degree"}),e.jsxs("select",{name:"",id:"bachelor",className:"select select-bordered w-full",value:x,onChange:l=>L(l.target.value),children:[e.jsx("option",{value:"",children:"--Bachelor--"}),Ze?null:Ge.map(l=>e.jsx("option",{value:l.name,children:l.name}))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Contact Number"}),e.jsx("input",{type:"text",value:q,onChange:l=>V(l.target.value),className:"input input-bordered w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Email"}),e.jsx("input",{type:"text",value:J,onChange:l=>ee(l.target.value),className:"input input-bordered w-full"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"LOA Semester"}),e.jsxs("select",{value:de,onChange:l=>I(l.target.value),className:"select select-bordered w-full",children:[e.jsx("option",{value:"",children:"Select LOA Semester"}),Oe.map(l=>e.jsx("option",{value:l,children:l},l))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"LOA Year"}),e.jsxs("select",{value:te,onChange:l=>w(l.target.value),className:"select select-bordered w-full",children:[e.jsx("option",{value:"",children:"Select LOA Year"}),Re.map(l=>e.jsx("option",{value:l,children:l},l))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Returning Semester"}),e.jsxs("select",{value:D,onChange:l=>A(l.target.value),className:"select select-bordered w-full",children:[e.jsx("option",{value:"",children:"Select Returning Semester"}),Oe.map(l=>e.jsx("option",{value:l,children:l},l))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Returning Year"}),e.jsxs("select",{value:U,onChange:l=>Se(l.target.value),className:"select select-bordered w-full",children:[e.jsx("option",{value:"",children:"Select Returning Year"}),Re.map(l=>e.jsx("option",{value:l,children:l},l))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Reason"}),e.jsx("textarea",{value:Ce,onChange:l=>_e(l.target.value),className:"textarea textarea-bordered w-full"})]})]}),e.jsx("div",{className:"mt-4 flex gap-2 justify-end",children:e.jsx("button",{className:"btn btn-primary w-20",type:"submit",disabled:r,children:r?"Saving...":"Save"})})]})]})})},Ut=()=>{const s=oe(),{openEditModal:t}=Ve(),a=async()=>{try{const{data:i}=await axios.get("/api/transactions");return i}catch(i){console.error(i)}},r=async i=>{try{await axios.delete(`/api/transactions/${i}`),s.invalidateQueries("getAllTransactions"),k.success("Transaction deleted successfully!")}catch(g){console.error(g)}},{data:o,isLoading:d}=K({queryKey:["getAllTransactions"],queryFn:a});return d?e.jsx("div",{children:"Loading..."}):e.jsxs("div",{className:"overflow-y-auto h-[60vh]",children:[e.jsxs("table",{className:"table table-xs",children:[e.jsx("thead",{className:"sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Student #"}),e.jsx("th",{children:"Full Name"}),e.jsx("th",{children:"Effectivity of LOA"}),e.jsx("th",{children:"Returning Academic Year"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:o.data.map((i,g)=>e.jsxs("tr",{className:"hover",children:[e.jsx("td",{children:i.student.student_number}),e.jsx("td",{children:`${i.student.first_name} ${i.student.middle_name} ${i.student.last_name}`}),e.jsx("td",{children:`${i.loa_semester} ${i.loa_year}`}),e.jsx("td",{children:`${i.re_semester} ${i.re_year}`}),e.jsx("td",{children:e.jsxs("div",{className:"flex items-center justify-end me-2 gap-1",children:[e.jsx("div",{className:"tooltip tooltip-bottom","data-tip":"Edit",children:e.jsx("button",{className:"btn bg-base-300 btn-xs rounded-sm",onClick:()=>t(i.id),children:e.jsx(Tt,{color:"green",size:20})})}),e.jsx("div",{className:"tooltip tooltip-bottom","data-tip":"Delete",children:e.jsx("button",{className:"btn bg-base-300 btn-xs rounded-sm",onClick:()=>r(i.id),children:e.jsx(Ft,{color:"red",size:20})})})]})})]},g))})]}),e.jsx(Yt,{})]})};function kt(){return e.jsxs(ct,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Dashboard"}),children:[e.jsx(it,{title:"Dashboard"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto sm:px-6 lg:px-20",children:e.jsx("div",{className:"overflow-hidden bg-base-100 shadow-sm sm:rounded-lg px-10",children:e.jsxs("div",{className:"flex gap-10",children:[e.jsx("div",{className:"flex-1 w-full",children:e.jsxs("div",{className:"p-6 text-gray-900 w-full",children:[e.jsxs("div",{className:"flex justify-between items-center pb-5",children:[e.jsx("h1",{children:"All Transaction"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("a",{className:"btn bg-base-300 btn-sm rounded-sm",href:"/api/generateCsv",children:"CSV"}),e.jsx("a",{className:"btn bg-base-300 btn-sm rounded-sm",href:"/api/generateExcel",children:"EXCEL"})]})]}),e.jsx(Ut,{})]})}),e.jsx("div",{className:"divider divider-horizontal m-0"}),e.jsx("div",{className:"w-2/5",children:e.jsxs("div",{className:"py-5 text-gray-900 w-full",children:[e.jsx("div",{className:"flex pb-5",children:e.jsx("h1",{children:"Create New Transaction"})}),e.jsx(St,{})]})})]})})})})]})}export{kt as default};
